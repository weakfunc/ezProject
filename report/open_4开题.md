## 任务

睡前进行足浴泡脚是大部分家庭的常规保健活动，然而传统方式下存在水温不好控制、烧水等操作繁琐的痛点，本设计整合“智能控温+多模式按摩”核心需求，适配家庭日常养生、中老年保健、上班族放松等场景，提升足浴体验的便捷性与舒适性。装置主要功能有：1. 智能控温功能：温度设定范围35-48℃， 超温保护（水温≥50℃自动断电/停止加热）、干烧保护（检测无水时禁止加热），双重安全防护。2. 多模式按摩功能：轻柔模式、标准模式、强劲模式，可切换调节； 3. 人机交互功能： 本地控制：触控面板（温度调节、模式切换、定时、开关）+ LED显示屏（实时显示水温、模式、剩余时间）、 远程控制（可选）：手机APP远程设定温度、选择按摩模式、启动/关闭设备，推送水温达标提醒。4. 安全与辅助功能： 漏电保护、防干烧、超温断电、缺水提醒、断电记忆等。指标要求：控温精度：±0.5℃，加热效率：室温（25℃）下，10分钟内水温升至40℃，按摩功能滚轮转速：轻柔档60-80rpm、标准档100-120rpm、强劲档140-160rpm（可调）。



## 实施方案

​		本系统以STM32F103单片机为核心控制单元，通过蓝牙与上位机APP进行无线通信，实现温度设定、按摩模式切换和远程启停等指令交互；单片机通过IO口读取触控开关，实现本地操作输入；通过PWM控制加热模块，实现35–48℃范围内的精准控温与超温保护；同时利用PWM驱动四路直流电机，实现多档可调的按摩滚轮转速；系统采用SPI接口驱动LCD显示屏，实时显示水温、工作模式与定时信息，确保良好的人机交互体验。

![image-20251206183618253](C:\Users\权恒毅\AppData\Roaming\Typora\typora-user-images\image-20251206183618253.png)

**具体实现方案**

​	（1）控制核心： 在本智能足浴器控制系统中，STM32F103单片机作为核心处理器，负责温控、按摩驱动、人机交互及蓝牙通信等关键任务。STM32F103基于ARM Cortex-M3内核，主频可达72 MHz，具备丰富且稳定的外设资源，非常适合完成加热功率控制、电机PWM调速、触控按键采集以及LCD显示等多任务并行的控制需求。其内部集成多路定时器，可精确输出PWM波形，用于加热模块的功率调节和按摩电机的转速控制；多通道ADC可采集温度传感器与水位相关信号，实现控温精度与安全保护；SPI接口可高速驱动LCD显示屏；多组GPIO支持触控按键输入；UART接口可方便地接入蓝牙模块，与上位机APP实现可靠通信。凭借计算能力适中、外设完善、功耗低和开发资料丰富等优势，STM32F103可为本系统提供稳定高效的控制平台，保证智能控温、多模式按摩及本地/远程操作等功能顺利实现。

​	（2）触控开关：电容触控开关用于实现本地的人机交互控制，包括温度调节、模式切换、定时设定与开关机操作。电容触控开关通过检测手指接近或触碰引起的电容变化来判断操作指令，相比传统机械按键具有无磨损、寿命长、防水性好、外观简洁等优势，非常适合潮湿环境下的足浴器使用场景。触控按键输出的信号由STM32F103的GPIO口采集，结合软件滤波与触控判定算法，可有效避免水滴、蒸汽等造成的误触发。

​	（3）加热模块：在本智能足浴器中，石墨烯加热贴片作为主要的加热执行元件，具有受热均匀、升温快、功耗低的特点，适合实现35–48℃范围内的精准控温。系统通过PWM驱动的MOS管调节石墨烯贴片的加热功率，PWM占空比越高，加热强度越大；同时，水温检测模块实时采集水温数据并传输给STM32F103，作为温控闭环的反馈量。单片机内部运行PID温度控制算法，根据设定温度与当前水温的偏差自动调整PWM占空比，使加热过程在快速升温的同时保持稳定，避免超调与温度波动；当温度达到上限或出现缺水、异常升温等情况时，系统会立即关闭MOS管，确保安全。通过石墨烯加热贴片、高速PWM调节和PID闭环控制的协同工作，设备能够实现高效、精确、可靠的智能控温功能。

​	（4）LCD显示模块： LCD显示屏承担关键的信息展示功能，用于实时呈现水温、按摩模式、定时状态以及工作进度，使用户能够直观掌握设备运行情况。系统通过STM32F103的SPI接口驱动LCD，实现稳定高速的数据刷新，确保界面显示清晰流畅。在潮湿环境下，LCD相较于传统LED数码管具备更好的可视性与扩展性，可在同一界面展示多种内容。同时配合触控按键形成完整的人机交互系统，使用户能够在本地直接设定加热温度、切换按摩强度或查看工作状态，从而提升整体使用体验与操作便利性。

​	（5）上位机APP：采用C#语言以及微软的WPF框架设计上位机，WPF上位机具有高度的界面自定义能力、良好的数据绑定功能和强大的图形渲染能力，能够实现灵活的界面布局和高效的数据交互，适用于复杂的用户界面和实时数据监控应用。



## 任务内容与指标

**任务内容**

（1）设计智能足浴器控制系统的硬件电路。

（2）掌握STM32单片机相关外设的开发。

（3）实现温度设定范围35-48℃， 超温保护（水温≥50℃自动断电/停止加热）、干烧保护（检测无水时禁止加热）。

（4）实现多模式按摩功能。

（5）设计人性化的显示界面。

（6）设计上位机软件实现对智能足浴器控制系统的控制。

（7）完成整个系统的控制系统框图和软件流程图。

（8）制作出样机并调试。

**指标**

（1）控温精度：±0.5℃。

（2）加热效率：室温（25℃）下，10分钟内水温升至40℃。

（3）按摩功能滚轮转速：轻柔档60-80rpm、标准档100-120rpm、强劲档140-160rpm（可调）。

