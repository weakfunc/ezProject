## 实施方案

​		系统以单片机主控为核心，通过Wi-Fi通信模块与手机APP及云平台进行数据交互；主控单片机采集重量传感器的模拟信号，并结合红外传感器的状态信息，对储粮仓余量、食槽状态及宠物接近情况进行分析，根据分析结果执行定时投喂或远程投喂控制；系统通过SPI接口驱动LCD显示屏，显示投喂状态、余量信息及运行参数，并通过按键实现本地参数设置；投喂过程中的重量数据、状态信息及投喂记录通过Wi-Fi上传至云平台，同时接收云端下发的投喂计划和宠物个体投喂参数，实现差异化投喂控制；当检测到食槽余量不足、电机异常或外部断电等情况时，系统触发蜂鸣器报警，并向手机APP发送异常提示信息；投喂计划与历史数据存储于非易失性存储器中，在断电恢复后自动加载并继续执行。

![image-20251227173510991](C:\Users\权恒毅\AppData\Roaming\Typora\typora-user-images\image-20251227173510991.png)

**具体实施方案**

（1）主控单片机模块
系统以单片机作为核心控制单元，负责完成投喂逻辑控制、传感器数据采集与处理、执行机构驱动以及与通信模块的数据交互；单片机通过ADC接口采集重量传感器输出的模拟信号，通过GPIO接口采集红外传感器状态信号，通过SPI接口驱动LCD显示屏显示系统运行状态与关键参数，同时对按键输入进行扫描，实现本地参数设置与模式切换；主控程序中实现定时投喂调度、异常状态判断及断电数据存储与恢复功能。

（2）重量传感器模块
重量检测模块采用应变式称重传感器，通过惠斯通电桥输出微弱模拟电压信号，经信号调理电路放大和滤波后送入单片机ADC通道，实现对食槽或储粮仓余量的实时检测；单片机对采集到的重量数据进行标定与计算，用于判断空槽、半满及满槽等工作状态，并为余量报警和投喂控制提供依据。

（3）红外传感器模块
红外传感模块采用数字输出型红外对射传感器，通过IO口采集其输出状态信号，用于检测宠物是否接近食槽或食槽当前状态；主控单片机根据红外传感器状态与投喂计划进行逻辑判断，实现投喂触发、行为记录及异常状态检测。

（4）执行机构与投喂控制模块
投喂执行机构由电机及其驱动电路组成，单片机通过IO口和PWM信号控制电机启停与运行时间，实现定量投喂；在投喂过程中，结合重量传感器反馈数据，对实际投喂量进行判断，当达到设定重量或出现异常状态时，及时停止电机运行。

（5）Wi-Fi通信模块
系统通过Wi-Fi通信模块与手机APP及云平台建立数据连接，实现投喂指令下发、传感器数据上传及系统状态同步；单片机通过串口或SPI接口与Wi-Fi模块通信，按照预设通信协议完成投喂计划更新、报警信息上报及设备状态反馈。

（6）云平台与手机APP交互模块
云平台用于存储投喂计划、投喂记录及宠物个体信息，单片机定时或按事件触发方式上传相关数据；手机APP通过云平台实现远程投喂控制、投喂计划设置、历史记录查询及报警信息接收，主控单片机根据云端下发的宠物ID及投喂策略执行对应的精准投喂方案。

（7）人机交互与显示模块
LCD显示模块通过SPI接口与单片机连接，用于显示当前投喂状态、食槽余量、通信状态及异常提示信息；按键模块通过GPIO口与单片机连接，用于本地投喂控制、参数设置及系统复位操作。

（8）报警与存储模块
系统通过蜂鸣器和指示灯实现本地异常报警，当检测到余量不足、电机卡堵或外部断电等状态时，由单片机触发声光提示；同时利用非易失性存储器保存投喂计划与历史数据，在断电后完成数据保持，并在恢复供电后自动加载并继续运行。

![image-20251227173038703](C:\Users\权恒毅\AppData\Roaming\Typora\typora-user-images\image-20251227173038703.png)

## 任务内容与指标

**任务内容**		

​		随着社会经济发展和人们生活水平的提高，宠物饲养已成为越来越多家庭的重要组成部分。然而，宠物主人在工作繁忙或外出时，常常无法按时、按量为宠物投喂食物，影响了宠物的健康与饮食习惯。为了解决这一问题，设计一个基于单片机的智能宠物投喂控制系统，具备定时投喂、远程控制、状态监测与异常报警等功能，具有重要的现实意义和应用价值。本设计的具体内容有：

（1）进行系统的总体方案设计，包括主控芯片的选择、通信模块的选择、传感器与执行器的选型等，并绘制系统总体结构图；

（2）完成各硬件电路模块的方案和电路，包括主控制器电路的设计，扩展电路的设计以及各传感器电路的设计；

（3）完成系统软件设计，包括单片机控制程序、传感器数据采集与处理、通信协议实现、远程控制逻辑等；

（4）设计并开发一款手机APP，实现远程投喂控制、投喂计划设置、投喂记录查询等功能；

（5）进行软硬件联合调试，验证系统的稳定性和实用性。

**指标**

（1）自行设计主控模块、重量传感器模块和红外传感模块（不可使用数字直出式传感器和集成模块），实时监测储粮仓余量与食槽状态；

（2）主控制器对采集的投喂数据与宠物接近状态进行分析，通过Wi-Fi通信模块将数据上传至云平台，形成投喂日志与行为分析；

（3）系统能够检测食槽余量（覆盖空槽≤5g、半满 20g~30g、满槽≥40g 场景，实际值与检测值误差≤±3g），在余量不足时发出提示或报警（支持用户通过APP自定义报警阈值，触发时同步推送APP通知+设备蜂鸣报警，报警准确率100%）；

（4）用户可通过手机APP远程设定个性化投喂方案、查看历史投喂记录及宠物活动数据，并对系统进行实时控制与模式切换；投喂计划（修改后系统同步时间≤5秒，无数据丢失）、接收系统状态通知（实时反馈“投喂中/空闲”“余量充足/不足”“正常供电/断电”，反馈延迟≤2秒）；

（5）实现宠物个体识别与精准投喂，识别出的宠物ID，从云平台获取为该宠物定制的投喂方案（例如，猫A需要减肥，投喂量少；猫B是幼猫，需要少食多餐）；

（6）系统具备断电记忆功能，确保投喂计划不因断电丢失（断电后72小时内，已设置的投喂计划及30天内历史记录不丢失，恢复供电后≤10秒恢复正常运行）；

（7）系统能够根据预设时间自动投喂（可设置≥5个不同投喂时段且无冲突，预设时间与实际投喂时间误差≤±30秒），并支持手动远程控制投喂（手机APP发出指令后系统响应时间≤3秒）；

（8）系统APP操作便捷，完成“新建投喂计划”“查看近7天投喂记录”“设置余量报警阈值”，且能准确识别并报警 “食槽余量不足”“电机卡堵故障”“外部断电”3类异常，无误报、漏报。